import*as e from"react";import{useState as t,useEffect as r}from"react";function o(t){const[r,o]=e.useState(!1),[n,a]=e.useState(!1),[i,s]=e.useState(!1),[l,c]=e.useState(null),[d,u]=e.useState(null);return[{error:l,data:d,isLoading:r,isResolved:n,isRejected:i},(...e)=>(o(!0),t(...e).then(e=>(u(e),a(!0),o(!1),e)).catch(e=>{throw c(e),s(!0),o(!1),e}))]}const n="undefined"!=typeof window,a=e=>{try{return JSON.stringify(e)}catch(e){throw new Error("useLocalStorage: failed to serialize the value to JSON")}},i=e=>{try{return e&&JSON.parse(e)}catch(t){return e}},s=(e,o,s={})=>{const{serialize:l=a,deserialize:c=i}=s,[d,u]=t(()=>{var t;return n?c(null!=(t=function(e){if(n&&"localStorage"in window)return localStorage.getItem(e)}(e))?t:void 0):o});return r(()=>{const t=t=>{var r;t.storageArea===window.localStorage&&t.key===e&&u(c(null!=(r=t.newValue)?r:void 0))};return n&&window.addEventListener("storage",t),()=>{n&&window.removeEventListener("storage",t)}},[]),r(()=>{!function(e,t){n&&"localStorage"in window&&(void 0===t?localStorage.removeItem(e):localStorage.setItem(e,t))}(e,l(d))},[e,d]),[void 0===d?o:d,u]},l=({steps:e,initialStep:r=0})=>{const[o,n]=t([]),[a,i]=t(r),s=t=>"number"==typeof t?t<0?0:t>=e.length?e.length-1:t:e.findIndex(e=>e.id===t)||0,l=e=>i(s(e));return{setComplete:(t=a)=>{const r=s(t),i=e[r].id;n([...new Set([...o,i])])},completed:o,index:a,isLast:a===e.length-1,navigation:{next:()=>l(a+1),prev:()=>l(a-1),go:l},step:e[a],setUncomplete:(t=a)=>{const r=s(t),i=e[r].id;n(o.filter(e=>e!==i))},reset:(e=r)=>{i(e),n([])}}};export{s as useLocalStorage,o as usePromise,l as useSteps};
//# sourceMappingURL=index.modern.mjs.map
